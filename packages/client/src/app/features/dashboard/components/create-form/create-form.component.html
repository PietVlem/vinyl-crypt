<app-layout-drawer-base
  title="Add a new vinyl record"
  description="Get started by filling in the information below to add your new vinyl."
>
  <ng-container drawer-content>
    <pre>
      {{ vinylCreationForm.value | json }}
    </pre>
    <form [formGroup]="vinylCreationForm" class="space-y-6 py-6 sm:space-y-0 sm:divide-y sm:divide-gray-200 sm:py-0" >
      <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
        <div>
          <label
            for="title"
            class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5"
          >Record name</label>
        </div>
        <div class="sm:col-span-2">
          <input
            formControlName="title"
            type="text"
            name="title"
            id="title"
            class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
          />
        </div>
      </div>

      <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
        <div>
          <label
            for="year"
            class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5"
          >Release year</label>
        </div>
        <div class="sm:col-span-2">
          <input
            formControlName="year"
            type="number"
            name="year"
            id="year"
            class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
          />
        </div>
      </div>

      <div class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5">
        <div>
          <label
            for="genre"
            class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5"
          >Genre</label>
        </div>
        <div class="sm:col-span-2">
          <div class="grid grid-cols-1">
            <select formControlName="genreId" id="genre" name="genre" class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
              @if(genresQuery.isLoading()) {
                <option disabled selected>Loading...</option>
              } @else {
                @for(genre of genresQuery.data(); track genre.id) {
                  <option value="{{ genre.id }}">{{ genre.name }}</option>
                }
              }
              <option>United States</option>
              <option selected>Canada</option>
              <option>Mexico</option>
            </select>
            <svg class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" data-slot="icon">
              <path fill-rule="evenodd" d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
            </svg>
          </div>
        </div>
      </div>

      <!-- Project description -->
      <div
        class="space-y-2 px-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:space-y-0 sm:px-6 sm:py-5"
      >
        <div>
          <label
            for="project-description"
            class="block text-sm/6 font-medium text-gray-900 sm:mt-1.5"
          >Notes</label>
        </div>
        <div class="sm:col-span-2">
          <textarea
            formControlName="notes"
            rows="3"
            name="project-description"
            id="project-description"
            class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"
          ></textarea>
        </div>
      </div>
    </form>
  </ng-container>
  <ng-container drawer-actions>
    <button
      type="button"
      class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"
      (click)="drawerService.hide()"
      >
      Cancel creation
    </button>
    <button
      type="submit"
      class="inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
      (click)="addVinyl()"
    >
      Add record
    </button>
  </ng-container>
</app-layout-drawer-base>
